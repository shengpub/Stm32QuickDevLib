; generated by Component: ARM Compiler 5.06 update 4 (build 422) Tool: ArmCC [4d3604]
; commandline ArmCC [--list --split_sections --debug -c --asm --interleave -o.\stm3210b-eval\bsp_led.o --asm_dir=.\STM3210B-EVAL\ --list_dir=.\STM3210B-EVAL\ --depend=.\stm3210b-eval\bsp_led.d --cpu=Cortex-M3 --apcs=interwork -O3 --diag_suppress=9931 -I..\ -I..\..\..\Libraries\CMSIS\CM3\CoreSupport -I..\..\..\Libraries\CMSIS\CM3\DeviceSupport\ST\STM32F10x -I..\..\..\Libraries\STM32F10x_StdPeriph_Driver\inc -I..\..\..\Utilities\STM32_EVAL -I..\..\..\Utilities\STM32_EVAL\STM3210B_EVAL -I..\..\..\Utilities\STM32_EVAL\Common -I..\Bsp -I..\MQTT -IC:\Users\gavinX\Desktop\GetWifiInfo\Project\STM32F10x_StdPeriph_Template\MDK-ARM\RTE\_STM32Project -Ie:\Keil_v5\ARM\PACK\Keil\STM32F1xx_DFP\1.1.0\Device\Include -Ie:\Keil_v5\ARM\CMSIS\Include -D__MICROLIB -D__UVISION_VERSION=522 -DSTM32F10X_HD -DSTM32F10X_HD -DUSE_STDPERIPH_DRIVER --omf_browse=.\stm3210b-eval\bsp_led.crf ..\Bsp\Bsp_led.c]
                          THUMB

                          AREA ||i.EnableLedPort||, CODE, READONLY, ALIGN=2

                  EnableLedPort PROC
;;;6      
;;;7      void EnableLedPort(uint8_t bits)
000000  4a0b              LDR      r2,|L1.48|
;;;8      {
;;;9      	GPIO_InitTypeDef GPIO_Init_Structure;
;;;10     	
;;;11     	if(mdLed.LedInfo[bits].UseFlage == 1)
000002  eb000140          ADD      r1,r0,r0,LSL #1
000006  b508              PUSH     {r3,lr}               ;8
000008  eb020081          ADD      r0,r2,r1,LSL #2
00000c  7a03              LDRB     r3,[r0,#8]
00000e  2b01              CMP      r3,#1
000010  d10d              BNE      |L1.46|
;;;12     	{
;;;13     		GPIO_Init_Structure.GPIO_Pin = mdLed.LedInfo[bits].GPIO_Pin; 
000012  f8321021          LDRH     r1,[r2,r1,LSL #2]
000016  f8ad1000          STRH     r1,[sp,#0]
;;;14     		GPIO_Init_Structure.GPIO_Mode = GPIO_Mode_Out_PP;
00001a  2110              MOVS     r1,#0x10
00001c  f88d1003          STRB     r1,[sp,#3]
;;;15     		GPIO_Init_Structure.GPIO_Speed = GPIO_Speed_50MHz;
000020  2103              MOVS     r1,#3
000022  f88d1002          STRB     r1,[sp,#2]
;;;16     
;;;17     		GPIO_Init(mdLed.LedInfo[bits].GPIO_Port,&GPIO_Init_Structure); /*led1*/
000026  6840              LDR      r0,[r0,#4]
000028  4669              MOV      r1,sp
00002a  f7fffffe          BL       GPIO_Init
                  |L1.46|
;;;18     	}
;;;19     }
00002e  bd08              POP      {r3,pc}
;;;20     /*系统led灯的参数初始化主要描述系统的led接在那些端口上*/
                          ENDP

                  |L1.48|
                          DCD      ||.bss||

                          AREA ||i.LedClose||, CODE, READONLY, ALIGN=1

                  LedClose PROC
;;;62     /*关闭灯操作*/
;;;63     void LedClose(uint8_t bits)
000000  1e40              SUBS     r0,r0,#1
;;;64     {
;;;65     	LedIoControl(bits -1,1);
000002  b2c0              UXTB     r0,r0
000004  2101              MOVS     r1,#1
000006  f7ffbffe          B.W      LedIoControl
;;;66     }
                          ENDP


                          AREA ||i.LedIoControl||, CODE, READONLY, ALIGN=2

                  LedIoControl PROC
;;;40     }
;;;41     void LedIoControl(uint8_t bits,uint8_t flage)
000000  eb000340          ADD      r3,r0,r0,LSL #1
;;;42     {
;;;43     	if(mdLed.LedInfo[bits].UseFlage == 1)
000004  4809              LDR      r0,|L3.44|
000006  b430              PUSH     {r4,r5}               ;42
000008  eb000283          ADD      r2,r0,r3,LSL #2
00000c  7a14              LDRB     r4,[r2,#8]
00000e  2c01              CMP      r4,#1
000010  d10a              BNE      |L3.40|
;;;44     	{
;;;45     		if(flage)
000012  2900              CMP      r1,#0
;;;46     		{
;;;47     			GPIO_SetBits(mdLed.LedInfo[bits].GPIO_Port,
;;;48     									mdLed.LedInfo[bits].GPIO_Pin);
;;;49     		}
;;;50     		else
;;;51     		{
;;;52     			GPIO_ResetBits(mdLed.LedInfo[bits].GPIO_Port,
000014  f8301023          LDRH     r1,[r0,r3,LSL #2]
000018  6850              LDR      r0,[r2,#4]            ;45
00001a  d002              BEQ      |L3.34|
00001c  bc30              POP      {r4,r5}               ;47
00001e  f7ffbffe          B.W      GPIO_SetBits
                  |L3.34|
000022  bc30              POP      {r4,r5}
000024  f7ffbffe          B.W      GPIO_ResetBits
                  |L3.40|
;;;53     									mdLed.LedInfo[bits].GPIO_Pin);
;;;54     		}
;;;55     	}
;;;56     }
000028  bc30              POP      {r4,r5}
00002a  4770              BX       lr
;;;57     /*开灯操作*/
                          ENDP

                  |L3.44|
                          DCD      ||.bss||

                          AREA ||i.LedOpen||, CODE, READONLY, ALIGN=1

                  LedOpen PROC
;;;57     /*开灯操作*/
;;;58     void LedOpen(uint8_t bits)
000000  1e40              SUBS     r0,r0,#1
;;;59     {
;;;60     	LedIoControl(bits -1,0);
000002  b2c0              UXTB     r0,r0
000004  2100              MOVS     r1,#0
000006  f7ffbffe          B.W      LedIoControl
;;;61     }
;;;62     /*关闭灯操作*/
                          ENDP


                          AREA ||i.SysLedInit||, CODE, READONLY, ALIGN=2

                  SysLedInit PROC
;;;27     }
;;;28     void SysLedInit()
000000  b510              PUSH     {r4,lr}
;;;29     {
;;;30     	uint8_t ucLoop = 0;
000002  2400              MOVS     r4,#0
;;;31     	memset(&mdLed,0,sizeof(mdLed));
000004  2130              MOVS     r1,#0x30
000006  4808              LDR      r0,|L5.40|
000008  f7fffffe          BL       __aeabi_memclr4
;;;32     	
;;;33     	SysLedParmInit();
00000c  f7fffffe          BL       SysLedParmInit
                  |L5.16|
;;;34     	
;;;35     	for(ucLoop = 0; ucLoop < 4; ucLoop++)
;;;36     	{
;;;37     		EnableLedPort(ucLoop);
000010  4620              MOV      r0,r4
000012  f7fffffe          BL       EnableLedPort
;;;38     		LedClose(ucLoop);
000016  4620              MOV      r0,r4
000018  f7fffffe          BL       LedClose
00001c  1c64              ADDS     r4,r4,#1
00001e  b2e4              UXTB     r4,r4                 ;35
000020  2c04              CMP      r4,#4                 ;35
000022  d3f5              BCC      |L5.16|
;;;39     	}
;;;40     }
000024  bd10              POP      {r4,pc}
;;;41     void LedIoControl(uint8_t bits,uint8_t flage)
                          ENDP

000026  0000              DCW      0x0000
                  |L5.40|
                          DCD      ||.bss||

                          AREA ||i.SysLedParmInit||, CODE, READONLY, ALIGN=2

                  SysLedParmInit PROC
;;;20     /*系统led灯的参数初始化主要描述系统的led接在那些端口上*/
;;;21     void SysLedParmInit()
000000  4804              LDR      r0,|L6.20|
;;;22     {
;;;23     	/*led1*/
;;;24     	mdLed.LedInfo[0].GPIO_Port = LED1_PROT;
000002  4903              LDR      r1,|L6.16|
;;;25     	mdLed.LedInfo[0].GPIO_Pin = LED1_Pin;
000004  6041              STR      r1,[r0,#4]  ; mdLed
000006  1589              ASRS     r1,r1,#22
000008  8001              STRH     r1,[r0,#0]
;;;26     	mdLed.LedInfo[0].UseFlage = 1;/*used*/
00000a  2101              MOVS     r1,#1
00000c  7201              STRB     r1,[r0,#8]
;;;27     }
00000e  4770              BX       lr
;;;28     void SysLedInit()
                          ENDP

                  |L6.16|
                          DCD      0x40011800
                  |L6.20|
                          DCD      ||.bss||

                          AREA ||.bss||, DATA, NOINIT, ALIGN=2

                  mdLed
                          %        48
