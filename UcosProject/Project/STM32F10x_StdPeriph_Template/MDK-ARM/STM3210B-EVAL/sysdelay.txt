; generated by Component: ARM Compiler 5.06 update 4 (build 422) Tool: ArmCC [4d3604]
; commandline ArmCC [--list --split_sections --debug -c --asm --interleave -o.\stm3210b-eval\sysdelay.o --asm_dir=.\STM3210B-EVAL\ --list_dir=.\STM3210B-EVAL\ --depend=.\stm3210b-eval\sysdelay.d --cpu=Cortex-M3 --apcs=interwork -O3 --diag_suppress=9931 -I..\ -I..\..\..\Libraries\CMSIS\CM3\CoreSupport -I..\..\..\Libraries\CMSIS\CM3\DeviceSupport\ST\STM32F10x -I..\..\..\Libraries\STM32F10x_StdPeriph_Driver\inc -I..\..\..\Utilities\STM32_EVAL -I..\..\..\Utilities\STM32_EVAL\STM3210B_EVAL -I..\..\..\Utilities\STM32_EVAL\Common -I..\Bsp -I..\MQTT -IC:\Users\gavinX\Desktop\GetWifiInfo\Project\STM32F10x_StdPeriph_Template\MDK-ARM\RTE\_STM32Project -Ie:\Keil_v5\ARM\PACK\Keil\STM32F1xx_DFP\1.1.0\Device\Include -Ie:\Keil_v5\ARM\CMSIS\Include -D__MICROLIB -D__UVISION_VERSION=522 -DSTM32F10X_HD -DSTM32F10X_HD -DUSE_STDPERIPH_DRIVER --omf_browse=.\stm3210b-eval\sysdelay.crf ..\Bsp\SysDelay.c]
                          THUMB

                          AREA ||i.Delay_us||, CODE, READONLY, ALIGN=2

                  Delay_us PROC
;;;17     
;;;18     void Delay_us(__IO u32 nTime)
000000  b501              PUSH     {r0,lr}
;;;19     { 
;;;20        TimingDelay = nTime;	
000002  4806              LDR      r0,|L1.28|
000004  9900              LDR      r1,[sp,#0]
000006  6001              STR      r1,[r0,#0]  ; TimingDelay
;;;21     	// 使能滴答定时器  
;;;22     	SysTick->CTRL |=  SysTick_CTRL_ENABLE_Msk;
000008  f04f21e0          MOV      r1,#0xe000e000
00000c  690a              LDR      r2,[r1,#0x10]
00000e  f0420201          ORR      r2,r2,#1
000012  610a              STR      r2,[r1,#0x10]
                  |L1.20|
;;;23     
;;;24     	while(TimingDelay != 0); 
000014  6801              LDR      r1,[r0,#0]  ; TimingDelay
000016  2900              CMP      r1,#0
000018  d1fc              BNE      |L1.20|
;;;25     }
00001a  bd08              POP      {r3,pc}
;;;26     void SysDelayMs(__IO u32 nTime)
                          ENDP

                  |L1.28|
                          DCD      ||.data||

                          AREA ||i.SysDelayMs||, CODE, READONLY, ALIGN=2

                  SysDelayMs PROC
;;;25     }
;;;26     void SysDelayMs(__IO u32 nTime)
000000  b501              PUSH     {r0,lr}
;;;27     {	 		  	  
;;;28     	TimingDelay = nTime * 100;
000002  2064              MOVS     r0,#0x64
000004  9900              LDR      r1,[sp,#0]
000006  4341              MULS     r1,r0,r1
000008  4805              LDR      r0,|L2.32|
00000a  6001              STR      r1,[r0,#0]  ; TimingDelay
;;;29       SysTick->CTRL |=  SysTick_CTRL_ENABLE_Msk;
00000c  f04f21e0          MOV      r1,#0xe000e000
000010  690a              LDR      r2,[r1,#0x10]
000012  f0420201          ORR      r2,r2,#1
000016  610a              STR      r2,[r1,#0x10]
                  |L2.24|
;;;30     
;;;31       while(TimingDelay != 0);   
000018  6801              LDR      r1,[r0,#0]  ; TimingDelay
00001a  2900              CMP      r1,#0
00001c  d1fc              BNE      |L2.24|
;;;32     } 
00001e  bd08              POP      {r3,pc}
;;;33     void TimingDelay_Decrement(void)
                          ENDP

                  |L2.32|
                          DCD      ||.data||

                          AREA ||i.SysTick_Handler||, CODE, READONLY, ALIGN=1

                  SysTick_Handler PROC
;;;39     }
;;;40     void SysTick_Handler(void) 
000000  f7ffbffe          B.W      TimingDelay_Decrement
;;;41     {
;;;42         TimingDelay_Decrement();
;;;43     		
;;;44     }
                          ENDP


                          AREA ||i.SysTick_Init||, CODE, READONLY, ALIGN=2

                  SysTick_Init PROC
;;;6      
;;;7      void SysTick_Init(uint32_t a)
000000  4910              LDR      r1,|L4.68|
;;;8      {
;;;9      	if (SysTick_Config(SystemCoreClock / 1000000)*a)	// ST3.5.0库版本
000002  4a11              LDR      r2,|L4.72|
000004  6809              LDR      r1,[r1,#0]  ; SystemCoreClock
000006  fbb1f2f2          UDIV     r2,r1,r2
00000a  f04f21e0          MOV      r1,#0xe000e000
00000e  f1b27f80          CMP      r2,#0x1000000
000012  d301              BCC      |L4.24|
000014  2201              MOVS     r2,#1                 ;8
000016  e00c              B        |L4.50|
                  |L4.24|
000018  f022427f          BIC      r2,r2,#0xff000000     ;8
00001c  1e52              SUBS     r2,r2,#1              ;8
00001e  614a              STR      r2,[r1,#0x14]         ;8
000020  4b0a              LDR      r3,|L4.76|
000022  22f0              MOVS     r2,#0xf0              ;8
000024  f8832d14          STRB     r2,[r3,#0xd14]        ;8
000028  2200              MOVS     r2,#0                 ;8
00002a  618a              STR      r2,[r1,#0x18]         ;8
00002c  2207              MOVS     r2,#7                 ;8
00002e  610a              STR      r2,[r1,#0x10]         ;8
000030  2200              MOVS     r2,#0                 ;8
                  |L4.50|
000032  4342              MULS     r2,r0,r2
000034  d000              BEQ      |L4.56|
                  |L4.54|
;;;10     	{ 
;;;11     		/* Capture error */ 
;;;12     		while (1);
000036  e7fe              B        |L4.54|
                  |L4.56|
;;;13     	}
;;;14     		// 关闭滴答定时器  
;;;15     	SysTick->CTRL &= ~ SysTick_CTRL_ENABLE_Msk;
000038  6908              LDR      r0,[r1,#0x10]
00003a  f0200001          BIC      r0,r0,#1
00003e  6108              STR      r0,[r1,#0x10]
;;;16     }
000040  4770              BX       lr
;;;17     
                          ENDP

000042  0000              DCW      0x0000
                  |L4.68|
                          DCD      SystemCoreClock
                  |L4.72|
                          DCD      0x000f4240
                  |L4.76|
                          DCD      0xe000e00f

                          AREA ||i.TimingDelay_Decrement||, CODE, READONLY, ALIGN=2

                  TimingDelay_Decrement PROC
;;;32     } 
;;;33     void TimingDelay_Decrement(void)
000000  4803              LDR      r0,|L5.16|
;;;34     {
;;;35         if(TimingDelay > 0)
000002  6801              LDR      r1,[r0,#0]  ; TimingDelay
000004  2900              CMP      r1,#0                 ;34
000006  d002              BEQ      |L5.14|
;;;36     		{
;;;37     			TimingDelay--;
000008  6801              LDR      r1,[r0,#0]  ; TimingDelay
00000a  1e49              SUBS     r1,r1,#1
00000c  6001              STR      r1,[r0,#0]  ; TimingDelay
                  |L5.14|
;;;38     		}
;;;39     }
00000e  4770              BX       lr
;;;40     void SysTick_Handler(void) 
                          ENDP

                  |L5.16|
                          DCD      ||.data||

                          AREA ||.data||, DATA, ALIGN=2

                  TimingDelay
                          DCD      0x00000000
